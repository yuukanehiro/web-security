<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORS Test - Web Security Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }

        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
        }

        h2 {
            color: #555;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-danger {
            background: #f56565;
            color: white;
        }

        .btn-danger:hover {
            background: #e53e3e;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245, 101, 101, 0.4);
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-success:hover {
            background: #38a169;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(72, 187, 120, 0.4);
        }

        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 300px;
            overflow-y: auto;
        }

        .result.success {
            background: #f0fff4;
            border: 1px solid #48bb78;
            color: #22543d;
        }

        .result.error {
            background: #fff5f5;
            border: 1px solid #f56565;
            color: #742a2a;
        }

        .info-box {
            background: #ebf8ff;
            border-left: 4px solid #4299e1;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }

        .warning-box {
            background: #fffaf0;
            border-left: 4px solid #ed8936;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }

        code {
            background: #f7fafc;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 13px;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .nav-tabs a {
            padding: 10px 20px;
            text-decoration: none;
            color: #666;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .nav-tabs a:hover,
        .nav-tabs a.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>CORS Testing Tool</h1>
        <p class="subtitle">Cross-Origin Resource Sharing ã®å‹•ä½œã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«</p>

        <div class="nav-tabs">
            <a href="index.html" class="active">åŸºæœ¬ãƒ†ã‚¹ãƒˆ</a>
            <a href="advanced.html">è©³ç´°ãƒ†ã‚¹ãƒˆ</a>
            <a href="tutorial.html">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</a>
        </div>

        <div class="info-box">
            <strong>ğŸ’¡ ã“ã®ãƒšãƒ¼ã‚¸ã«ã¤ã„ã¦:</strong><br>
            ã“ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€ç•°ãªã‚‹CORSè¨­å®šã‚’æŒã¤ã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®å‹•ä½œã‚’ç¢ºèªã§ãã¾ã™ã€‚<br>
            é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ï¼ˆF12ï¼‰ã®Networkã‚¿ãƒ–ã¨Consoleã‚¿ãƒ–ã‚’é–‹ã„ã¦ç¢ºèªã—ã¦ãã ã•ã„ã€‚
        </div>

        <!-- ã‚»ã‚­ãƒ¥ã‚¢ãªCORSã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>âœ… ã‚»ã‚­ãƒ¥ã‚¢ãªCORSè¨­å®š (ãƒãƒ¼ãƒˆ: 8082)</h2>
            <p>ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ã‚ªãƒªã‚¸ãƒ³æ¤œè¨¼ã‚’å®Ÿè£…ã—ãŸã‚µãƒ¼ãƒãƒ¼</p>
            <div class="button-group">
                <button class="btn-success" onclick="testSecureCors()">GETãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡</button>
                <button class="btn-success" onclick="testSecureCorsWithCredentials()">èªè¨¼æƒ…å ±ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆ</button>
            </div>
            <div id="secure-result"></div>
        </div>

        <!-- è„†å¼±ãªCORSã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>âš ï¸ è„†å¼±ãªCORSè¨­å®š (ãƒãƒ¼ãƒˆ: 8081)</h2>
            <div class="warning-box">
                <strong>è­¦å‘Š:</strong> ã“ã®ã‚µãƒ¼ãƒãƒ¼ã¯å­¦ç¿’ç›®çš„ã§æ„å›³çš„ã«è„†å¼±ãªè¨­å®šã«ãªã£ã¦ã„ã¾ã™ã€‚<br>
                å…¨ã¦ã®ã‚ªãƒªã‚¸ãƒ³ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å…¥ã‚Œã€èªè¨¼æƒ…å ±ã‚‚è¨±å¯ã—ã¾ã™ã€‚
            </div>
            <div class="button-group">
                <button class="btn-danger" onclick="testVulnerableCors()">GETãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡</button>
                <button class="btn-danger" onclick="testVulnerableCorsWithCredentials()">èªè¨¼æƒ…å ±ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆ</button>
            </div>
            <div id="vulnerable-result"></div>
        </div>

        <!-- æ¨™æº–çš„ãªCORSã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>ğŸ”§ æ¨™æº–çš„ãªCORSè¨­å®š (ãƒãƒ¼ãƒˆ: 8080)</h2>
            <p>rs/cors ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ãŸå®Ÿè£…</p>
            <div class="button-group">
                <button class="btn-primary" onclick="testStandardCors()">CORSãƒ†ã‚¹ãƒˆ</button>
                <button class="btn-primary" onclick="testStandardCorsCredentials()">èªè¨¼æƒ…å ±ãƒ†ã‚¹ãƒˆ</button>
            </div>
            <div id="standard-result"></div>
        </div>
    </div>

    <script>
        // ã‚»ã‚­ãƒ¥ã‚¢ãªCORSã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
        async function testSecureCors() {
            const resultDiv = document.getElementById('secure-result');
            resultDiv.innerHTML = 'é€ä¿¡ä¸­...';

            try {
                const response = await fetch('http://localhost:8082/api/data', {
                    method: 'GET',
                });

                const data = await response.json();
                resultDiv.className = 'result success';
                resultDiv.textContent = `âœ… æˆåŠŸ!\n\nStatus: ${response.status}\n\nResponse:\n${JSON.stringify(data, null, 2)}`;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ ã‚¨ãƒ©ãƒ¼:\n${error.message}\n\né–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®Consoleã§è©³ç´°ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚`;
            }
        }

        async function testSecureCorsWithCredentials() {
            const resultDiv = document.getElementById('secure-result');
            resultDiv.innerHTML = 'é€ä¿¡ä¸­...';

            try {
                const response = await fetch('http://localhost:8082/api/data', {
                    method: 'GET',
                    credentials: 'include', // Cookieã‚’å«ã‚ã‚‹
                });

                const data = await response.json();
                resultDiv.className = 'result success';
                resultDiv.textContent = `âœ… æˆåŠŸ!\n\nStatus: ${response.status}\nCredentials: include\n\nResponse:\n${JSON.stringify(data, null, 2)}`;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ ã‚¨ãƒ©ãƒ¼:\n${error.message}\n\nåŸå› : ã‚ªãƒªã‚¸ãƒ³ãŒãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã«å«ã¾ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚`;
            }
        }

        // è„†å¼±ãªCORSã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
        async function testVulnerableCors() {
            const resultDiv = document.getElementById('vulnerable-result');
            resultDiv.innerHTML = 'é€ä¿¡ä¸­...';

            try {
                const response = await fetch('http://localhost:8081/api/data', {
                    method: 'GET',
                });

                const data = await response.json();
                resultDiv.className = 'result success';
                resultDiv.textContent = `âš ï¸ ãƒªã‚¯ã‚¨ã‚¹ãƒˆæˆåŠŸï¼ˆè„†å¼±æ€§ã‚ã‚Šï¼‰\n\nStatus: ${response.status}\n\nResponse:\n${JSON.stringify(data, null, 2)}\n\næ³¨æ„: ä»»æ„ã®ã‚ªãƒªã‚¸ãƒ³ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¦ã—ã¾ã„ã¾ã™ï¼`;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ ã‚¨ãƒ©ãƒ¼:\n${error.message}`;
            }
        }

        async function testVulnerableCorsWithCredentials() {
            const resultDiv = document.getElementById('vulnerable-result');
            resultDiv.innerHTML = 'é€ä¿¡ä¸­...';

            try {
                const response = await fetch('http://localhost:8081/api/data', {
                    method: 'GET',
                    credentials: 'include',
                });

                const data = await response.json();
                resultDiv.className = 'result success';
                resultDiv.textContent = `âš ï¸ èªè¨¼æƒ…å ±ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆæˆåŠŸï¼ˆé‡å¤§ãªè„†å¼±æ€§ï¼ï¼‰\n\nStatus: ${response.status}\nCredentials: include\n\nResponse:\n${JSON.stringify(data, null, 2)}\n\nè­¦å‘Š: æ©Ÿå¯†æƒ…å ±ãŒä»»æ„ã®ã‚µã‚¤ãƒˆã‹ã‚‰å–å¾—ã§ãã¦ã—ã¾ã„ã¾ã™ï¼`;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ ã‚¨ãƒ©ãƒ¼:\n${error.message}`;
            }
        }

        // æ¨™æº–çš„ãªCORSã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
        async function testStandardCors() {
            const resultDiv = document.getElementById('standard-result');
            resultDiv.innerHTML = 'é€ä¿¡ä¸­...';

            try {
                const response = await fetch('http://localhost:8080/api/cors-test', {
                    method: 'GET',
                });

                const data = await response.json();
                resultDiv.className = 'result success';
                resultDiv.textContent = `âœ… æˆåŠŸ!\n\nStatus: ${response.status}\n\nResponse:\n${JSON.stringify(data, null, 2)}`;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ ã‚¨ãƒ©ãƒ¼:\n${error.message}`;
            }
        }

        async function testStandardCorsCredentials() {
            const resultDiv = document.getElementById('standard-result');
            resultDiv.innerHTML = 'é€ä¿¡ä¸­...';

            try {
                const response = await fetch('http://localhost:8080/api/cors-credentials', {
                    method: 'GET',
                    credentials: 'include',
                });

                const data = await response.json();
                resultDiv.className = 'result success';
                resultDiv.textContent = `âœ… æˆåŠŸ!\n\nStatus: ${response.status}\nCredentials: include\n\nResponse:\n${JSON.stringify(data, null, 2)}`;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ ã‚¨ãƒ©ãƒ¼:\n${error.message}`;
            }
        }

        console.log('ğŸ” CORS Testing Tool Loaded');
        console.log('é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®Networkã‚¿ãƒ–ã‚’é–‹ã„ã¦ã€CORSãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
    </script>
</body>
</html>
