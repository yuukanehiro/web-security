<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORS Tutorial - Web Security Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .nav-tabs a {
            padding: 10px 20px;
            text-decoration: none;
            color: #666;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .nav-tabs a:hover,
        .nav-tabs a.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .step {
            margin-bottom: 40px;
            padding: 25px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            position: relative;
        }

        .step.completed {
            border-color: #48bb78;
            background: #f0fff4;
        }

        .step-number {
            position: absolute;
            top: -15px;
            left: 20px;
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .step.completed .step-number {
            background: #48bb78;
        }

        h2 {
            color: #555;
            margin-bottom: 15px;
            font-size: 1.3em;
            margin-left: 45px;
        }

        .step-content {
            margin-top: 15px;
        }

        .explanation {
            background: #f7fafc;
            padding: 15px;
            border-left: 4px solid #4299e1;
            margin: 15px 0;
            border-radius: 4px;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        .code-block .comment {
            color: #a0aec0;
        }

        .code-block .keyword {
            color: #f687b3;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            background: #667eea;
            color: white;
            margin-top: 10px;
        }

        button:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        button:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
        }

        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 300px;
            overflow-y: auto;
        }

        .result.success {
            background: #f0fff4;
            border: 1px solid #48bb78;
            color: #22543d;
        }

        .result.error {
            background: #fff5f5;
            border: 1px solid #f56565;
            color: #742a2a;
        }

        .checkpoint {
            background: #fffaf0;
            border: 2px solid #ed8936;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .checkpoint h3 {
            color: #c05621;
            margin-bottom: 10px;
        }

        ul {
            margin-left: 20px;
            line-height: 1.8;
        }

        .progress-bar {
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.5s ease;
            width: 0%;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>CORSãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</h1>
        <p class="subtitle">ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã§CORSã‚’ç†è§£ã—ã‚ˆã†</p>

        <div class="nav-tabs">
            <a href="index.html">åŸºæœ¬ãƒ†ã‚¹ãƒˆ</a>
            <a href="advanced.html">è©³ç´°ãƒ†ã‚¹ãƒˆ</a>
            <a href="tutorial.html" class="active">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</a>
        </div>

        <div class="progress-bar">
            <div class="progress-bar-fill" id="progress"></div>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—1: Same-Origin Policy -->
        <div class="step" id="step1">
            <div class="step-number">1</div>
            <h2>Same-Origin Policyã‚’ç†è§£ã™ã‚‹</h2>
            <div class="step-content">
                <div class="explanation">
                    <strong>Same-Origin Policyï¼ˆåŒä¸€ã‚ªãƒªã‚¸ãƒ³ãƒãƒªã‚·ãƒ¼ï¼‰</strong>ã¨ã¯ã€Webãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã§ã€
                    ç•°ãªã‚‹ã‚ªãƒªã‚¸ãƒ³ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ï¼‰ã‹ã‚‰ã®ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶é™ã—ã¾ã™ã€‚
                </div>

                <p><strong>ã‚ªãƒªã‚¸ãƒ³ã®æ§‹æˆè¦ç´ ï¼š</strong></p>
                <div class="code-block">
https://example.com:443/path
â””â”€â”¬â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜â””â”¬â”˜
ã‚¹ã‚­ãƒ¼ãƒ    ãƒ›ã‚¹ãƒˆ   ãƒãƒ¼ãƒˆ

<span class="comment">// åŒä¸€ã‚ªãƒªã‚¸ãƒ³</span>
https://example.com/page1 <span class="keyword">ã¨</span> https://example.com/page2 âœ…

<span class="comment">// ç•°ãªã‚‹ã‚ªãƒªã‚¸ãƒ³</span>
https://example.com <span class="keyword">ã¨</span> http://example.com âŒ (ã‚¹ã‚­ãƒ¼ãƒ é•ã„)
https://example.com <span class="keyword">ã¨</span> https://api.example.com âŒ (ãƒ›ã‚¹ãƒˆé•ã„)
https://example.com <span class="keyword">ã¨</span> https://example.com:8080 âŒ (ãƒãƒ¼ãƒˆé•ã„)
                </div>

                <div class="checkpoint">
                    <h3>ğŸ¯ ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p>é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ï¼ˆF12ï¼‰ã‚’é–‹ã„ã¦ã€ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š</p>
                    <ul>
                        <li>ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã®ã‚ªãƒªã‚¸ãƒ³ã¯ä½•ã§ã™ã‹ï¼Ÿ</li>
                        <li>ã“ã‚Œã‹ã‚‰æ¥ç¶šã™ã‚‹APIã‚µãƒ¼ãƒãƒ¼ï¼ˆlocalhost:8080ï¼‰ã¯åŒä¸€ã‚ªãƒªã‚¸ãƒ³ã§ã™ã‹ï¼Ÿ</li>
                    </ul>
                </div>

                <button onclick="completeStep(1)">ç†è§£ã—ã¾ã—ãŸ â†’</button>
            </div>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—2: åŒä¸€ã‚ªãƒªã‚¸ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆ -->
        <div class="step" id="step2">
            <div class="step-number">2</div>
            <h2>åŒä¸€ã‚ªãƒªã‚¸ãƒ³ vs ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³</h2>
            <div class="step-content">
                <div class="explanation">
                    ã¾ãšã€åŒä¸€ã‚ªãƒªã‚¸ãƒ³ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯å•é¡Œãªãå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
                    ãã®å¾Œã€ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ï¼ˆç•°ãªã‚‹ãƒãƒ¼ãƒˆï¼‰ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã©ã†ãªã‚‹ã‹è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
                </div>

                <p><strong>ç¾åœ¨ã®ãƒšãƒ¼ã‚¸:</strong> <code id="current-origin"></code></p>
                <p><strong>ãƒªã‚¯ã‚¨ã‚¹ãƒˆå…ˆ:</strong> <code>http://localhost:8080</code></p>

                <button onclick="testStep2()">ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡</button>
                <div id="step2-result"></div>

                <div class="checkpoint">
                    <h3>ğŸ¯ ä½•ãŒèµ·ã“ã£ãŸã‹ç¢ºèªã—ã‚ˆã†</h3>
                    <ul>
                        <li>ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯æˆåŠŸã—ã¾ã—ãŸã‹ï¼Ÿ</li>
                        <li>é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®Networkã‚¿ãƒ–ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ç¢ºèªã—ã¦ãã ã•ã„</li>
                        <li>"Origin"ãƒ˜ãƒƒãƒ€ãƒ¼ãŒè‡ªå‹•çš„ã«ä»˜ä¸ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ</li>
                    </ul>
                </div>

                <button onclick="completeStep(2)" id="step2-btn" disabled>æ¬¡ã¸ â†’</button>
            </div>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—3: CORSãƒ˜ãƒƒãƒ€ãƒ¼ã®ç¢ºèª -->
        <div class="step" id="step3">
            <div class="step-number">3</div>
            <h2>CORSãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ç¢ºèªã™ã‚‹</h2>
            <div class="step-content">
                <div class="explanation">
                    ã‚µãƒ¼ãƒãƒ¼ã¯<code>Access-Control-Allow-Origin</code>ãƒ˜ãƒƒãƒ€ãƒ¼ã§ã€
                    ã©ã®ã‚ªãƒªã‚¸ãƒ³ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã™ã‚‹ã‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚
                </div>

                <button onclick="testStep3()">ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ç¢ºèªã™ã‚‹</button>
                <div id="step3-result"></div>

                <div class="code-block">
<span class="comment">// ã‚µãƒ¼ãƒãƒ¼ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆæœŸå¾…å€¤ï¼‰</span>
Access-Control-Allow-Origin: http://localhost:3000
Access-Control-Allow-Credentials: true
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
                </div>

                <div class="checkpoint">
                    <h3>ğŸ¯ ç¢ºèªäº‹é …</h3>
                    <ul>
                        <li>Access-Control-Allow-Originã«ç¾åœ¨ã®ã‚ªãƒªã‚¸ãƒ³ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ</li>
                        <li>ã‚‚ã—å«ã¾ã‚Œã¦ã„ãªã‘ã‚Œã°ã€ã©ã†ãªã‚Šã¾ã™ã‹ï¼Ÿ</li>
                    </ul>
                </div>

                <button onclick="completeStep(3)" id="step3-btn" disabled>æ¬¡ã¸ â†’</button>
            </div>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ -->
        <div class="step" id="step4">
            <div class="step-number">4</div>
            <h2>ãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½“é¨“ã™ã‚‹</h2>
            <div class="step-content">
                <div class="explanation">
                    ç‰¹å®šã®æ¡ä»¶ä¸‹ã§ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã¯æœ¬ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å‰ã«<strong>OPTIONSãƒ¡ã‚½ãƒƒãƒ‰</strong>ã§
                    ãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã™ã€‚
                </div>

                <p><strong>ãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆãŒç™ºç”Ÿã™ã‚‹æ¡ä»¶ï¼š</strong></p>
                <ul>
                    <li>GETã€HEADã€POSTä»¥å¤–ã®ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆPUTã€DELETEç­‰ï¼‰</li>
                    <li>Content-TypeãŒapplication/jsonç­‰</li>
                    <li>ã‚«ã‚¹ã‚¿ãƒ ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å«ã‚€</li>
                </ul>

                <p style="margin-top: 15px;"><strong>ãƒ†ã‚¹ãƒˆ:</strong> POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆ + Content-Type: application/json</p>
                <button onclick="testStep4()">ãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç™ºç”Ÿã•ã›ã‚‹</button>
                <div id="step4-result"></div>

                <div class="checkpoint">
                    <h3>ğŸ¯ Networkã‚¿ãƒ–ã§ç¢ºèªã—ã‚ˆã†</h3>
                    <ul>
                        <li>OPTIONSãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸã‹ï¼Ÿï¼ˆãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆï¼‰</li>
                        <li>ãã®å¾Œã«POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸã‹ï¼Ÿ</li>
                        <li>ãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ç¢ºèªã—ã¦ãã ã•ã„</li>
                    </ul>
                </div>

                <button onclick="completeStep(4)" id="step4-btn" disabled>æ¬¡ã¸ â†’</button>
            </div>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—5: èªè¨¼æƒ…å ±ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆ -->
        <div class="step" id="step5">
            <div class="step-number">5</div>
            <h2>èªè¨¼æƒ…å ±ï¼ˆCookieï¼‰ã‚’å«ã‚€ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</h2>
            <div class="step-content">
                <div class="explanation">
                    Cookieã‚’å«ã‚€ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã¯ã€ç‰¹åˆ¥ãªè¨­å®šãŒå¿…è¦ã§ã™ã€‚
                </div>

                <div class="code-block">
<span class="comment">// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´</span>
fetch(url, {
    credentials: <span class="keyword">'include'</span>  <span class="comment">// Cookieã‚’é€ä¿¡</span>
})

<span class="comment">// ã‚µãƒ¼ãƒãƒ¼å´ï¼ˆå¿…é ˆï¼‰</span>
Access-Control-Allow-Origin: http://localhost:3000  <span class="comment">// * ã¯ä½¿ç”¨ä¸å¯</span>
Access-Control-Allow-Credentials: true
                </div>

                <button onclick="testStep5()">èªè¨¼æƒ…å ±ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡</button>
                <div id="step5-result"></div>

                <div class="checkpoint">
                    <h3>ğŸ¯ é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ</h3>
                    <ul>
                        <li>credentials: 'include'ã‚’æŒ‡å®šã™ã‚‹ã¨ã€CookieãŒé€ä¿¡ã•ã‚Œã¾ã™</li>
                        <li>ã“ã®å ´åˆã€ã‚µãƒ¼ãƒãƒ¼ã¯<code>Access-Control-Allow-Origin: *</code>ã‚’ä½¿ç”¨ã§ãã¾ã›ã‚“</li>
                        <li>å…·ä½“çš„ãªã‚ªãƒªã‚¸ãƒ³ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</li>
                    </ul>
                </div>

                <button onclick="completeStep(5)" id="step5-btn" disabled>æ¬¡ã¸ â†’</button>
            </div>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—6: è„†å¼±ãªè¨­å®šã‚’ç†è§£ã™ã‚‹ -->
        <div class="step" id="step6">
            <div class="step-number">6</div>
            <h2>è„†å¼±ãªCORSè¨­å®šã®å±é™ºæ€§</h2>
            <div class="step-content">
                <div class="explanation" style="border-left-color: #f56565; background: #fff5f5;">
                    <strong>âš ï¸ å±é™ºãªè¨­å®š:</strong> ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®Originã‚’ãã®ã¾ã¾åæ˜ ã™ã‚‹å®Ÿè£…
                </div>

                <div class="code-block">
<span class="comment">// âŒ éå¸¸ã«å±é™ºï¼</span>
origin := r.Header.Get(<span class="keyword">"Origin"</span>)
w.Header().Set(<span class="keyword">"Access-Control-Allow-Origin"</span>, origin)
w.Header().Set(<span class="keyword">"Access-Control-Allow-Credentials"</span>, <span class="keyword">"true"</span>)

<span class="comment">// ã“ã®è¨­å®šã§ã¯ã€ä»»æ„ã®ã‚µã‚¤ãƒˆã‹ã‚‰èªè¨¼æƒ…å ±ä»˜ãã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¦ã—ã¾ã†ï¼</span>
                </div>

                <p>å®Ÿéš›ã«è„†å¼±ãªã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒãƒ¼ãƒˆ8081ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š</p>
                <button onclick="testStep6()">è„†å¼±ãªã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹</button>
                <div id="step6-result"></div>

                <div class="checkpoint">
                    <h3>ğŸ¯ ãªãœå±é™ºãªã®ã‹</h3>
                    <ul>
                        <li>æ‚ªæ„ã®ã‚ã‚‹ã‚µã‚¤ãƒˆãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®Cookieã‚’ä½¿ã£ã¦APIã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹</li>
                        <li>å€‹äººæƒ…å ±ã‚„æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ãŒç›—ã¾ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹</li>
                        <li>å¿…ãšãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆæ–¹å¼ã§ã‚ªãƒªã‚¸ãƒ³ã‚’æ¤œè¨¼ã™ã¹ã</li>
                    </ul>
                </div>

                <button onclick="completeStep(6)" id="step6-btn" disabled>æ¬¡ã¸ â†’</button>
            </div>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—7: ã‚»ã‚­ãƒ¥ã‚¢ãªå®Ÿè£… -->
        <div class="step" id="step7">
            <div class="step-number">7</div>
            <h2>ã‚»ã‚­ãƒ¥ã‚¢ãªCORSå®Ÿè£…</h2>
            <div class="step-content">
                <div class="explanation" style="border-left-color: #48bb78; background: #f0fff4;">
                    <strong>âœ… å®‰å…¨ãªå®Ÿè£…:</strong> ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã«ã‚ˆã‚‹ã‚ªãƒªã‚¸ãƒ³æ¤œè¨¼
                </div>

                <div class="code-block">
<span class="comment">// âœ… ã‚»ã‚­ãƒ¥ã‚¢ãªå®Ÿè£…</span>
<span class="keyword">func</span> isAllowedOrigin(origin <span class="keyword">string</span>) <span class="keyword">bool</span> {
    allowedOrigins := []<span class="keyword">string</span>{
        <span class="keyword">"https://example.com"</span>,
        <span class="keyword">"https://www.example.com"</span>,
        <span class="keyword">"http://localhost:3000"</span>,  <span class="comment">// é–‹ç™ºç’°å¢ƒç”¨</span>
    }

    <span class="keyword">for</span> _, allowed := <span class="keyword">range</span> allowedOrigins {
        <span class="keyword">if</span> origin == allowed {
            <span class="keyword">return true</span>
        }
    }
    <span class="keyword">return false</span>
}

<span class="comment">// ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ã®ä½¿ç”¨</span>
<span class="keyword">if</span> isAllowedOrigin(origin) {
    w.Header().Set(<span class="keyword">"Access-Control-Allow-Origin"</span>, origin)
}
                </div>

                <p>ã‚»ã‚­ãƒ¥ã‚¢ãªã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒãƒ¼ãƒˆ8082ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š</p>
                <button onclick="testStep7()">ã‚»ã‚­ãƒ¥ã‚¢ãªã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹</button>
                <div id="step7-result"></div>

                <div class="checkpoint">
                    <h3>ğŸ¯ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h3>
                    <ul>
                        <li>è¨±å¯ã™ã‚‹ã‚ªãƒªã‚¸ãƒ³ã‚’æ˜ç¤ºçš„ã«ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—</li>
                        <li>æœ¬ç•ªç’°å¢ƒã§ã¯å¿…ãšHTTPSã‚’ä½¿ç”¨</li>
                        <li>å¿…è¦æœ€å°é™ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã¿è¨±å¯</li>
                        <li>ç’°å¢ƒå¤‰æ•°ã§è¨­å®šã‚’ç®¡ç†</li>
                    </ul>
                </div>

                <button onclick="completeStep(7)" id="step7-btn" disabled>å®Œäº†ï¼</button>
            </div>
        </div>
    </div>

    <script>
        let completedSteps = [];

        // ç¾åœ¨ã®ã‚ªãƒªã‚¸ãƒ³ã‚’è¡¨ç¤º
        document.getElementById('current-origin').textContent = window.location.origin;

        function completeStep(stepNumber) {
            if (!completedSteps.includes(stepNumber)) {
                completedSteps.push(stepNumber);
                document.getElementById('step' + stepNumber).classList.add('completed');
                updateProgress();
            }

            // æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’æœ‰åŠ¹åŒ–
            if (stepNumber < 7) {
                const nextStep = stepNumber + 1;
                document.getElementById('step' + nextStep).scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function updateProgress() {
            const progress = (completedSteps.length / 7) * 100;
            document.getElementById('progress').style.width = progress + '%';

            if (completedSteps.length === 7) {
                alert('ğŸ‰ ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«å®Œäº†ï¼ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼\n\nCORSã®åŸºæœ¬ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ãŸã€‚\næ¬¡ã¯å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å®Ÿè£…ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚');
            }
        }

        async function testStep2() {
            const resultDiv = document.getElementById('step2-result');
            resultDiv.innerHTML = 'é€ä¿¡ä¸­...';

            try {
                const response = await fetch('http://localhost:8080/api/cors-test');
                const data = await response.json();

                resultDiv.className = 'result success';
                resultDiv.textContent = `âœ… æˆåŠŸï¼\n\nã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæˆåŠŸã—ã¾ã—ãŸã€‚\nã‚µãƒ¼ãƒãƒ¼ãŒCORSãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¿”ã—ã¦ãã‚ŒãŸãŸã‚ã§ã™ã€‚\n\nResponse:\n${JSON.stringify(data, null, 2)}`;

                document.getElementById('step2-btn').disabled = false;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ ã‚¨ãƒ©ãƒ¼:\n${error.message}\n\nã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚`;
            }
        }

        async function testStep3() {
            const resultDiv = document.getElementById('step3-result');
            resultDiv.innerHTML = 'é€ä¿¡ä¸­...';

            try {
                const response = await fetch('http://localhost:8080/api/cors-test');

                let headerInfo = 'CORSãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼:\n\n';
                headerInfo += `Access-Control-Allow-Origin: ${response.headers.get('access-control-allow-origin') || '(ãªã—)'}\n`;
                headerInfo += `Access-Control-Allow-Credentials: ${response.headers.get('access-control-allow-credentials') || '(ãªã—)'}\n`;
                headerInfo += `Access-Control-Allow-Methods: ${response.headers.get('access-control-allow-methods') || '(ãªã—)'}\n`;

                resultDiv.className = 'result success';
                resultDiv.textContent = `âœ… ãƒ˜ãƒƒãƒ€ãƒ¼å–å¾—æˆåŠŸ\n\n${headerInfo}`;

                document.getElementById('step3-btn').disabled = false;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ ã‚¨ãƒ©ãƒ¼:\n${error.message}`;
            }
        }

        async function testStep4() {
            const resultDiv = document.getElementById('step4-result');
            resultDiv.innerHTML = 'é€ä¿¡ä¸­...';

            console.log('ğŸ”µ ãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç™ºç”Ÿã•ã›ã¾ã™');
            console.log('é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®Networkã‚¿ãƒ–ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼');

            try {
                const response = await fetch('http://localhost:8080/api/cors-test', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ tutorial: 'step4' })
                });

                const data = await response.json();

                resultDiv.className = 'result success';
                resultDiv.textContent = `âœ… ãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆæˆåŠŸï¼\n\nNetworkã‚¿ãƒ–ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š\n1. OPTIONSãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆï¼‰\n2. POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆæœ¬ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰\nã®2ã¤ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚\n\nResponse:\n${JSON.stringify(data, null, 2)}`;

                document.getElementById('step4-btn').disabled = false;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ ã‚¨ãƒ©ãƒ¼:\n${error.message}`;
            }
        }

        async function testStep5() {
            const resultDiv = document.getElementById('step5-result');
            resultDiv.innerHTML = 'é€ä¿¡ä¸­...';

            try {
                const response = await fetch('http://localhost:8080/api/cors-credentials', {
                    method: 'GET',
                    credentials: 'include'  // Cookieã‚’å«ã‚ã‚‹
                });

                const data = await response.json();

                resultDiv.className = 'result success';
                resultDiv.textContent = `âœ… èªè¨¼æƒ…å ±ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆæˆåŠŸï¼\n\ncredentials: 'include'ã«ã‚ˆã‚Šã€CookieãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚\n\nResponse:\n${JSON.stringify(data, null, 2)}`;

                document.getElementById('step5-btn').disabled = false;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ ã‚¨ãƒ©ãƒ¼:\n${error.message}`;
            }
        }

        async function testStep6() {
            const resultDiv = document.getElementById('step6-result');
            resultDiv.innerHTML = 'é€ä¿¡ä¸­...';

            try {
                const response = await fetch('http://localhost:8081/api/data', {
                    method: 'GET',
                    credentials: 'include'
                });

                const data = await response.json();

                resultDiv.className = 'result success';
                resultDiv.textContent = `âš ï¸ ã‚¢ã‚¯ã‚»ã‚¹æˆåŠŸï¼ˆè„†å¼±æ€§ã‚ã‚Šï¼‰\n\nã“ã®ã‚µãƒ¼ãƒãƒ¼ã¯ä»»æ„ã®ã‚ªãƒªã‚¸ãƒ³ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¦ã—ã¾ã„ã¾ã™ã€‚\nå®Ÿéš›ã®æ”»æ’ƒã§ã¯ã€æ‚ªæ„ã®ã‚ã‚‹ã‚µã‚¤ãƒˆãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ©Ÿå¯†æƒ…å ±ã‚’ç›—ã¿å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚\n\nResponse:\n${JSON.stringify(data, null, 2)}`;

                document.getElementById('step6-btn').disabled = false;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ ã‚¨ãƒ©ãƒ¼:\n${error.message}`;
            }
        }

        async function testStep7() {
            const resultDiv = document.getElementById('step7-result');
            resultDiv.innerHTML = 'é€ä¿¡ä¸­...';

            try {
                const response = await fetch('http://localhost:8082/api/data', {
                    method: 'GET'
                });

                // ã“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã€ç¾åœ¨ã®ã‚ªãƒªã‚¸ãƒ³ãŒãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã«å«ã¾ã‚Œã¦ã„ã‚Œã°æˆåŠŸã—ã¾ã™
                const data = await response.json();

                resultDiv.className = 'result success';
                resultDiv.textContent = `âœ… ã‚»ã‚­ãƒ¥ã‚¢ãªã‚µãƒ¼ãƒãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æˆåŠŸï¼\n\nã“ã®ã‚µãƒ¼ãƒãƒ¼ã¯ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆæ–¹å¼ã§ã‚ªãƒªã‚¸ãƒ³ã‚’æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚\nè¨±å¯ã•ã‚ŒãŸã‚ªãƒªã‚¸ãƒ³ã‹ã‚‰ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹ãŒå¯èƒ½ã§ã™ã€‚\n\nResponse:\n${JSON.stringify(data, null, 2)}`;

                document.getElementById('step7-btn').disabled = false;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ ã‚¨ãƒ©ãƒ¼:\n${error.message}\n\nç¾åœ¨ã®ã‚ªãƒªã‚¸ãƒ³ï¼ˆ${window.location.origin}ï¼‰ãŒãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã«å«ã¾ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚`;
            }
        }

        console.log('ğŸ“š CORSãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é–‹å§‹ï¼');
        console.log('é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ï¼ˆF12ï¼‰ã‚’é–‹ã„ã¦ã€ä¸€ç·’ã«å­¦ç¿’ã‚’é€²ã‚ã¾ã—ã‚‡ã†ã€‚');
    </script>
</body>
</html>
